#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>

#define N 9
#define SUBGRID 3
#define MASTER 0
#define MAX_JOBS 20 // Maximum initial subproblems to distribute

// Function to check if a number can be placed in a given cell
int is_valid(int grid[N][N], int row, int col, int num) {
    for (int x = 0; x < N; x++) {
        if (grid[row][x] == num || grid[x][col] == num) return 0;
    }
    int startRow = row - row % SUBGRID, startCol = col - col % SUBGRID;
    for (int i = 0; i < SUBGRID; i++)
        for (int j = 0; j < SUBGRID; j++)
            if (grid[i + startRow][j + startCol] == num) return 0;
    return 1;
}

// Backtracking Sudoku Solver (used by workers)
int solve_sudoku(int grid[N][N]) {
    int row = -1, col = -1, is_empty = 0;
    for (int i = 0; i < N; i++) {
        for (int j = 0; j < N; j++) {
            if (grid[i][j] == 0) {
                row = i;
                col = j;
                is_empty = 1;
                break;
            }
        }
        if (is_empty) break;
    }
    if (!is_empty) return 1;

    for (int num = 1; num <= N; num++) {
        if (is_valid(grid, row, col, num)) {
            grid[row][col] = num;
            if (solve_sudoku(grid)) return 1;
            grid[row][col] = 0; // Backtrack
        }
    }
    return 0;
}

// Master: Generates initial subproblems
int generate_subproblems(int grid[N][N], int subproblems[MAX_JOBS][N][N]) {
    int count = 0;
    int row = -1, col = -1;


printf("grid being passed to subproblem: \n");
     for (int i = 0; i < N; i++) {
                for (int j = 0; j < N; j++) {
                    printf("%d ", grid[i][j]);
                }
                printf("\n");
            }
            printf("\n");

    // Find the first empty cell
    for (int i = 0; i < N; i++) {
        for (int j = 0; j < N; j++) {
            if (grid[i][j] == 0) {
                row = i;
                col = j;
                break;
            }
        }
        if (row != -1) break;
    }

    if (row == -1) return 0; // Already solved

    // Generate subproblems by placing different numbers in the first empty cell
    for (int num = 1; num <= N; num++) {
        if (is_valid(grid, row, col, num)) {
            for (int i = 0; i < N; i++)
                for (int j = 0; j < N; j++)
                    subproblems[count][i][j] = grid[i][j];
            subproblems[count][row][col] = num;
            count++;
            if (count >= MAX_JOBS) break;
        }
    }
    return count;
}

// Master: Distributes subproblems and collects results
void master(int grid[N][N], int num_procs) {
    int subproblems[MAX_JOBS][N][N];
    int num_jobs = generate_subproblems(grid, subproblems);
    int solved_grid[N][N];
    int solved = 0;
    
    // Distribute subproblems to workers
    for (int i = 0; i < num_jobs; i++) {
        MPI_Send(subproblems[i], N * N, MPI_INT, (i % (num_procs - 1)) + 1, 1, MPI_COMM_WORLD);
   
	int worker_rank = (i % (num_procs - 1)) + 1;

	printf("Master assigned board to Worker %d:\n", worker_rank);
        for (int r = 0; r < N; r++) {
            for (int c = 0; c < N; c++) {
                printf("%d ", subproblems[i][r][c]);
            }
            printf("\n");
        }
        printf("\n");
    }

    // Receive solution from workers
    MPI_Status status;
    MPI_Recv(solved_grid, N * N, MPI_INT, MPI_ANY_SOURCE, 2, MPI_COMM_WORLD, &status);
    solved = 1;

    // Broadcast termination signal
    for (int i = 1; i < num_procs; i++) {
        MPI_Send(NULL, 0, MPI_INT, i, 3, MPI_COMM_WORLD);
    }

    // Print solved Sudoku
    printf("Solved Sudoku:\n");
    for (int i = 0; i < N; i++) {
        for (int j = 0; j < N; j++) {
            printf("%d ", solved_grid[i][j]);
        }
        printf("\n");
    }
}

// Worker: Solves assigned Sudoku puzzle
void worker(int rank) {
    int grid[N][N];
    MPI_Status status;

    while (1) {
        // Receive job from master
        MPI_Recv(grid, N * N, MPI_INT, MASTER, MPI_ANY_TAG, MPI_COMM_WORLD, &status);

        if (status.MPI_TAG == 3) break; // Termination signal

	
	// Solve the Sudoku
        if (solve_sudoku(grid)) {
            MPI_Send(grid, N * N, MPI_INT, MASTER, 2, MPI_COMM_WORLD);
        }
    }
}

int main(int argc, char *argv[]) {

    double start_time, end_time, elapsed_time;

    start_time = MPI_Wtime();

    int rank, num_procs;
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &num_procs);

    /*
    int grid[N][N] = {
        {5, 3, 0, 0, 7, 0, 0, 0, 0},
        {6, 0, 0, 1, 9, 5, 0, 0, 0},
        {0, 9, 8, 0, 0, 0, 0, 6, 0},
        {8, 0, 0, 0, 6, 0, 0, 0, 3},
        {4, 0, 0, 8, 0, 3, 0, 0, 1},
        {7, 0, 0, 0, 2, 0, 0, 0, 6},
        {0, 6, 0, 0, 0, 0, 2, 8, 0},
        {0, 0, 0, 4, 1, 9, 0, 0, 5},
        {0, 0, 0, 0, 8, 0, 0, 7, 9}
    };
 
 */

/*    
// 9 x 9 easy

    int grid[N][N] = {
        {3, 0, 4, 0, 6, 9, 0, 5, 0},
        {0, 0, 0, 2, 7, 0, 0, 0, 4},
        {9, 0, 2, 0, 0, 4, 0, 0, 0},
        {0, 2, 0, 0, 8, 5, 0, 1, 9},
        {8, 0, 9, 0, 0, 0, 2, 0, 5},
        {5, 1, 0, 3, 9, 0, 0, 6, 0},
        {0, 0, 0, 8, 0, 0, 5, 0, 3},
        {2, 0, 0, 0, 4, 6, 0, 0, 0},
        {0, 4, 0, 7, 5, 0, 9, 0, 6}
    };
*/

// 9 x 9 medium

 int grid[N][N]= {
	{0, 4, 0, 0, 0, 5, 8, 0, 0},
	{0, 0, 2, 8, 3, 1, 0, 0, 0},
	{0, 0, 0, 0, 9, 0, 3, 0, 5},
	{0, 1, 0, 0, 0, 0, 9, 4, 0},
	{8, 3, 0, 0, 1, 0, 0, 5, 6},
	{0, 2, 9, 0, 0, 0, 0, 7, 0},
	{7, 0, 5, 0, 8, 0, 0, 0, 0},
	{0, 0, 0, 1, 5, 9, 4, 0, 0},
	{0, 0, 1, 2, 0, 0, 0, 3, 0}

 };


 /*   
//16 x 16 easy
	  int grid[N][N] = {
        {0, 15, 0, 1, 0, 2, 10, 14, 12, 0, 0, 0, 0, 0, 0, 0},
        {0, 6, 3, 16, 12, 0, 8, 4, 14, 15, 1, 0, 2, 0, 0, 0},
        {14, 0, 9, 7, 11, 3, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {4, 13, 2, 12, 0, 0, 0, 0, 6, 0, 0, 0, 0, 15, 0, 0},
        {0, 0, 0, 0, 14, 1, 11, 7, 3, 5, 10, 0, 0, 8, 0, 12},
        {3, 16, 0, 0, 2, 4, 0, 0, 0, 14, 7, 13, 0, 0, 5, 15},
        {11, 0, 5, 0, 0, 0, 0, 0, 0, 9, 4, 0, 0, 6, 0, 0},
        {0, 0, 0, 0, 13, 0, 16, 5, 15, 0, 0, 12, 0, 0, 0, 0},
        {0, 0, 0, 0, 9, 0, 1, 12, 0, 8, 3, 10, 11, 0, 15, 0},
        {2, 12, 0, 11, 0, 0, 14, 3, 5, 4, 0, 0, 0, 0, 9, 0},
        {6, 3, 0, 4, 0, 0, 13, 0, 0, 11, 9, 1, 0, 12, 16, 2},
        {0, 0, 10, 9, 0, 0, 0, 0, 0, 0, 12, 0, 8, 0, 6, 7},
        {12, 8, 0, 0, 16, 0, 0, 10, 0, 13, 0, 0, 0, 5, 0, 0},
        {5, 0, 0, 0, 3, 0, 4, 6, 0, 1, 15, 0, 0, 0, 0, 0},
        {0, 9, 1, 6, 0, 14, 0, 11, 0, 0, 2, 0, 0, 0, 10, 8},
        {0, 14, 0, 0, 0, 13, 9, 0, 4, 12, 11, 8, 0, 0, 2, 0}
    };

*/

/*
// 16 x 16 medium
 
int grid[N][N] = {
        {0, 15, 0,  1,  0,  2,  10, 14, 12, 0,  0,  0,  0,  0,  0,  0 },
        {0, 6,  3,  16, 12, 0,  8,  4,  14, 15, 1,  0,  2,  0,  0,  0 },
        {14, 0, 9,  7,  11, 3,  15, 0,  0,  0,  0,  0,  0,  0,  0,  0 },
        {4, 13, 2,  12, 0,  0,  0,  0,  6,  0,  0,  0,  0,  15, 0,  0 },
        {0, 0,  0,  0,  14, 1,  0,  0,  3,  5,  10, 0,  0,  8,  0,  12},
        {3, 16, 0,  0,  2,  4,  0,  0,  0,  14, 7,  13, 0,  0,  5,  15},
        {11, 0, 5,  0,  0,  0,  0,  0,  0,  9,  4,  0,  0,  6,  0,  0 },
        {0, 0,  0,  0,  13, 0,  16, 5,  15, 0,  0,  12, 0,  0,  0,  0 },
        {0, 0,  0,  0,  9,  0,  1,  12, 0,  8,  3,  10, 11, 0,  15, 0 },
        {2, 12, 0,  11, 0,  0,  14, 3,  5,  4,  0,  0,  0,  0,  9,  0 },
        {6, 3,  0,  4,  0,  0,  13, 0,  0,  11, 9,  1,  0,  12, 16, 2 },
        {0, 0,  10, 9,  0,  0,  0,  0,  0,  0,  12, 0,  8,  0,  6,  7 },
        {12, 8,  0,  0,  16, 0,  0,  10, 0,  13, 0,  0,  0,  5,  0,  0 },
        {5, 0,  0,  0,  3,  0,  4,  6,  0,  1,  15, 0,  0,  0,  0,  0 },
        {0, 9,  1,  6,  0,  14, 0,  11, 0,  0,  2,  0,  0,  0,  10, 8 },
        {0, 14, 0,  0,  0,  13, 9,  0,  4,  12, 11, 8,  0,  0,  2,  0 }
    };

*/
/*
// 25 x 25 easy

 int grid[N][N] = {
        {0, 0, 0, 8, 15, 0, 21, 6, 17, 0, 0, 0, 0, 0, 0, 24, 19, 0, 0, 0, 12, 0, 0, 0, 2},
        {0, 0, 0, 3, 11, 0, 16, 2, 4, 13, 7, 25, 8, 17, 0, 1, 15, 20, 18, 22, 6, 19, 9, 10, 5},
        {0, 0, 0, 4, 7, 14, 0, 0, 0, 0, 0, 0, 1, 0, 0, 8, 0, 3, 0, 0, 0, 11, 0, 22, 24},
        {0, 0, 17, 6, 2, 23, 1, 0, 12, 11, 0, 18, 0, 0, 4, 10, 5, 16, 9, 0, 13, 8, 7, 15, 3},
        {10, 0, 9, 0, 13, 0, 8, 15, 0, 0, 24, 0, 0, 0, 6, 0, 0, 11, 12, 0, 0, 18, 4, 0, 20},
        {6, 3, 2, 0, 0, 15, 25, 1, 14, 16, 23, 5, 4, 0, 9, 22, 24, 18, 8, 0, 19, 12, 13, 7, 17},
        {0, 0, 0, 0, 0, 0, 0, 0, 9, 0, 12, 7, 0, 6, 0, 0, 14, 4, 2, 17, 16, 5, 3, 11, 10},
        {0, 0, 0, 12, 0, 6, 0, 3, 0, 4, 0, 14, 0, 10, 0, 7, 0, 1, 15, 5, 9, 21, 2, 24, 8},
        {0, 0, 5, 14, 0, 0, 7, 0, 0, 2, 0, 8, 0, 0, 0, 3, 0, 9, 25, 16, 15, 6, 1, 4, 18},
        {9, 4, 7, 0, 0, 8, 5, 0, 10, 17, 3, 1, 2, 18, 0, 0, 12, 6, 0, 19, 20, 22, 14, 23, 25},
        {18, 0, 0, 0, 0, 0, 0, 0, 23, 0, 2, 10, 0, 5, 0, 0, 3, 0, 21, 1, 0, 0, 0, 0, 0},
        {3, 23, 21, 2, 5, 20, 6, 17, 15, 1, 0, 4, 0, 0, 0, 0, 0, 0, 0, 7, 0, 9, 0, 0, 13},
        {4, 0, 6, 0, 1, 11, 2, 18, 25, 5, 9, 0, 24, 7, 8, 17, 13, 12, 23, 15, 10, 16, 19, 3, 0},
        {8, 9, 13, 0, 0, 7, 19, 21, 24, 10, 1, 20, 0, 23, 3, 16, 6, 2, 14, 11, 22, 4, 17, 5, 15},
        {0, 0, 0, 0, 0, 16, 0, 0, 3, 8, 6, 21, 25, 15, 0, 4, 18, 0, 5, 9, 0, 0, 0, 0, 0},
        {13, 2, 19, 16, 20, 5, 0, 7, 8, 22, 10, 17, 14, 4, 12, 15, 9, 25, 3, 24, 21, 1, 18, 6, 11},
        {7, 12, 0, 0, 0, 0, 0, 0, 1, 14, 20, 23, 0, 13, 0, 0, 0, 17, 19, 6, 0, 15, 25, 9, 16},
        {11, 6, 10, 17, 4, 9, 3, 0, 2, 25, 5, 0, 0, 8, 0, 18, 20, 13, 1, 21, 7, 23, 24, 14, 22},
        {1, 5, 3, 23, 9, 21, 17, 19, 16, 15, 0, 6, 11, 24, 18, 14, 8, 7, 22, 12, 2, 13, 10, 20, 4},
        {25, 15, 18, 22, 14, 13, 4, 24, 6, 0, 21, 3, 7, 9, 1, 11, 2, 23, 16, 10, 8, 17, 5, 12, 19},
        {2, 11, 1, 7, 25, 10, 15, 8, 13, 12, 18, 19, 0, 0, 0, 6, 0, 5, 4, 3, 17, 24, 22, 16, 9},
        {17, 8, 12, 13, 21, 2, 0, 25, 7, 6, 4, 24, 9, 1, 5, 19, 16, 15, 0, 0, 11, 3, 20, 18, 23},
        {15, 10, 22, 9, 6, 3, 14, 4, 20, 24, 16, 0, 23, 25, 17, 12, 1, 21, 11, 18, 5, 2, 8, 0, 7},
        {5, 0, 0, 0, 0, 17, 9, 16, 11, 23, 0, 0, 0, 0, 0, 0, 7, 24, 20, 0, 0, 0, 6, 21, 1},
        {14, 0, 16, 24, 23, 1, 18, 5, 21, 19, 8, 11, 6, 3, 7, 9, 25, 22, 17, 2, 4, 10, 15, 13, 0}
    };

*/


/*    
// 25 x 25 medium
//
int grid[N][N] = {
        {23, 0, 20, 8, 15, 0, 21, 6, 17, 0, 0, 0, 0, 0, 0, 24, 19, 0, 0, 0, 12, 0, 0, 0, 2},
        {0, 0, 14, 3, 11, 0, 16, 2, 0, 13, 0, 0, 0, 17, 0, 0, 15, 0, 18, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 4, 7, 14, 0, 0, 0, 0, 0, 0, 1, 0, 0, 8, 0, 3, 0, 0, 0, 11, 0, 22, 24},
        {0, 0, 0, 6, 0, 23, 0, 0, 0, 0, 0, 0, 0, 19, 0, 10, 0, 0, 0, 25, 0, 0, 0, 0, 0},
        {10, 0, 9, 0, 13, 0, 8, 15, 19, 0, 24, 0, 0, 22, 6, 0, 0, 11, 12, 0, 0, 18, 4, 0, 20},
        {0, 3, 0, 0, 10, 0, 25, 0, 0, 16, 0, 0, 4, 21, 9, 22, 0, 0, 8, 20, 0, 12, 0, 7, 17},
        {20, 25, 8, 1, 18, 19, 24, 0, 9, 0, 0, 0, 0, 0, 22, 0, 14, 0, 2, 0, 0, 0, 3, 11, 0},
        {16, 0, 23, 0, 22, 0, 0, 0, 18, 4, 17, 0, 0, 10, 0, 7, 0, 0, 15, 5, 0, 0, 0, 24, 0},
        {21, 0, 5, 0, 19, 12, 0, 0, 0, 0, 11, 8, 0, 20, 0, 0, 0, 9, 0, 16, 15, 0, 0, 0, 18},
        {0, 0, 7, 15, 0, 0, 5, 0, 10, 17, 3, 0, 0, 0, 0, 21, 0, 6, 0, 19, 0, 22, 14, 0, 0},
        {18, 0, 0, 0, 0, 0, 0, 0, 23, 0, 2, 10, 0, 5, 0, 20, 3, 0, 21, 1, 0, 0, 0, 0, 0},
        {0, 23, 21, 2, 5, 0, 6, 0, 15, 0, 19, 0, 12, 16, 14, 25, 22, 10, 24, 7, 18, 9, 11, 8, 13},
        {4, 14, 6, 20, 1, 11, 2, 18, 25, 5, 9, 22, 24, 7, 8, 17, 13, 12, 23, 15, 10, 16, 19, 3, 21},
        {8, 9, 13, 25, 12, 7, 19, 21, 24, 10, 1, 20, 18, 23, 3, 16, 6, 2, 14, 11, 22, 4, 17, 5, 15},
        {24, 7, 11, 10, 17, 16, 12, 22, 3, 8, 6, 21, 25, 15, 13, 4, 18, 19, 5, 9, 1, 20, 23, 2, 14},
        {13, 2, 19, 16, 20, 5, 23, 7, 8, 22, 10, 17, 14, 4, 12, 15, 9, 25, 3, 24, 21, 1, 18, 6, 11},
        {7, 12, 24, 21, 8, 18, 11, 10, 1, 14, 20, 23, 22, 13, 2, 5, 4, 17, 19, 6, 3, 15, 25, 9, 16},
        {11, 6, 10, 17, 4, 9, 3, 12, 2, 25, 5, 15, 16, 8, 19, 18, 20, 13, 1, 21, 7, 23, 24, 14, 22},
        {1, 5, 3, 23, 9, 21, 17, 19, 16, 15, 25, 6, 11, 24, 18, 14, 8, 7, 22, 12, 2, 13, 10, 20, 4},
        {25, 15, 18, 22, 14, 13, 4, 24, 6, 20, 21, 3, 7, 9, 1, 11, 2, 23, 16, 10, 8, 17, 5, 12, 19},
        {2, 11, 1, 7, 25, 10, 15, 8, 13, 12, 18, 19, 20, 14, 21, 6, 23, 5, 4, 3, 17, 24, 22, 16, 9},
        {17, 8, 12, 13, 21, 2, 22, 25, 7, 6, 4, 24, 9, 1, 5, 19, 16, 15, 10, 14, 11, 3, 20, 18, 23},
        {15, 10, 22, 9, 6, 3, 14, 4, 20, 24, 16, 13, 23, 25, 17, 12, 1, 21, 11, 18, 5, 2, 8, 19, 7},
        {5, 19, 4, 18, 3, 17, 9, 16, 11, 23, 22, 12, 10, 2, 15, 13, 7, 24, 20, 8, 25, 14, 6, 21, 1},
        {14, 20, 16, 24, 23, 1, 18, 5, 21, 19, 8, 11, 6, 3, 7, 9, 25, 22, 17, 2, 4, 10, 15, 13, 0}
    };	  

*/
/*
// 25 x 25 hard
int grid[N][N] = {
        {1, 0, 4, 0, 25, 0, 19, 0, 0, 10, 21, 8, 0, 14, 0, 6, 12, 9, 0, 0, 0, 0, 0, 0, 5},
        {5, 0, 19, 23, 24, 0, 22, 12, 0, 0, 16, 6, 0, 20, 0, 18, 0, 25, 14, 13, 10, 11, 0, 1, 15},
        {0, 0, 0, 0, 0, 0, 21, 5, 0, 20, 11, 10, 0, 1, 0, 4, 8, 24, 23, 15, 18, 0, 16, 22, 19},
        {0, 7, 21, 8, 18, 0, 0, 0, 11, 0, 5, 0, 0, 24, 0, 0, 0, 17, 22, 1, 9, 6, 25, 0, 0},
        {0, 13, 15, 0, 22, 14, 0, 18, 0, 16, 0, 0, 0, 4, 0, 0, 0, 19, 0, 0, 0, 24, 20, 21, 17},
        {12, 0, 11, 0, 6, 0, 0, 0, 0, 15, 0, 0, 0, 0, 21, 25, 19, 0, 4, 0, 22, 14, 0, 20, 0},
        {8, 0, 0, 21, 0, 16, 0, 0, 0, 2, 0, 3, 0, 0, 0, 0, 17, 23, 18, 22, 0, 0, 0, 24, 6},
        {4, 0, 14, 18, 7, 9, 0, 22, 21, 19, 0, 0, 0, 2, 0, 5, 0, 0, 0, 6, 16, 15, 0, 11, 12},
        {22, 0, 24, 0, 23, 0, 0, 11, 0, 7, 0, 0, 4, 0, 14, 0, 2, 12, 0, 8, 5, 19, 0, 25, 9},
        {20, 0, 0, 0, 5, 0, 0, 0, 0, 17, 9, 0, 12, 18, 0, 1, 0, 0, 7, 24, 0, 0, 0, 13, 4},
        {13, 0, 0, 5, 0, 2, 23, 14, 4, 18, 22, 0, 17, 0, 0, 20, 0, 1, 9, 21, 12, 0, 0, 8, 11},
        {14, 23, 0, 24, 0, 0, 0, 0, 0, 0, 0, 0, 20, 25, 0, 3, 4, 13, 0, 11, 21, 9, 5, 18, 22},
        {7, 0, 0, 11, 17, 20, 24, 0, 0, 0, 3, 4, 1, 12, 0, 0, 6, 14, 0, 5, 25, 13, 0, 0, 0},
        {0, 0, 16, 9, 0, 17, 11, 7, 10, 25, 0, 0, 0, 13, 6, 0, 0, 18, 0, 0, 19, 4, 0, 0, 20},
        {6, 15, 0, 19, 4, 13, 0, 0, 5, 0, 18, 11, 0, 0, 9, 8, 22, 16, 25, 10, 7, 0, 0, 0, 0},
        {0, 0, 0, 2, 0, 0, 10, 19, 3, 0, 1, 0, 22, 9, 4, 11, 15, 0, 20, 0, 0, 8, 23, 0, 25},
        {0, 24, 8, 13, 1, 0, 0, 4, 20, 0, 17, 14, 0, 0, 18, 0, 16, 22, 5, 0, 11, 0, 10, 0, 0},
        {23, 10, 0, 0, 0, 0, 0, 0, 18, 0, 6, 0, 16, 0, 0, 17, 1, 0, 13, 0, 0, 3, 19, 12, 0},
        {25, 5, 0, 14, 11, 0, 17, 0, 8, 24, 13, 0, 19, 23, 15, 9, 0, 0, 12, 0, 20, 0, 22, 0, 7},
        {0, 0, 17, 4, 0, 22, 15, 0, 23, 11, 12, 25, 0, 0, 0, 0, 18, 8, 0, 7, 0, 0, 14, 0, 13},
        {19, 6, 23, 22, 8, 0, 0, 1, 25, 4, 14, 2, 0, 3, 7, 13, 10, 11, 16, 0, 0, 0, 0, 0, 0},
        {0, 4, 0, 17, 0, 3, 0, 24, 0, 8, 20, 23, 11, 10, 25, 22, 0, 0, 0, 12, 13, 2, 18, 6, 0},
        {0, 0, 7, 16, 0, 0, 6, 17, 2, 21, 0, 18, 0, 0, 0, 19, 0, 0, 8, 0, 0, 0, 0, 4, 0},
        {18, 9, 25, 1, 2, 11, 0, 0, 13, 22, 4, 0, 21, 0, 5, 0, 23, 7, 0, 0, 15, 0, 3, 0, 8},
        {0, 21, 10, 0, 0, 12, 0, 20, 16, 0, 19, 0, 0, 0, 0, 15, 14, 4, 2, 18, 23, 25, 11, 7, 0}
   	}; 


*/

//double start_time, end_time, elapsed_time;

    //start_time = MPI_Wtime();
    if (rank == MASTER) {
        master(grid, num_procs);
    } else {
        worker(rank);
    }
    end_time = MPI_Wtime();


    MPI_Finalize();
    printf("elapsed time to solve %d x %d grid is : %f\n", N, N, end_time - start_time);

    return 0;
}

